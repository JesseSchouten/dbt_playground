version: 2

models:
  - name: stg_candy_store__orders
    description: candy store dataset
    config:
      tags:
        - candy_store
    columns:
      - name: order_id
        description: Primary Key of the candy store order
        tests:
          - unique:
              config:
                limit: 10
          - not_null
          - dbt_expectations.expect_column_to_exist
      - name: customer_id
        description: ID of the candy store customer
      - name: type
        description: type of candy
        tests:
          - dbt_expectations.expect_column_to_exist
          - accepted_values:
              values:
                - Jawbreaker
                - M&M
                - Skittles
      - name: timestamp
        description: timestamp of the order
      - name: order_date
        description: date of the order
        tests:
          - dbt_utils.expression_is_true:
              expression: "> '2024-01-01'"
      - name: amount
        description: amount of the order
        tests:
          - is_positive_number
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 100000
          - dbt_expectations.expect_column_median_to_be_between:
              min_value: 0
              max_value: 25
      - name: currency
        description: currency of the order purchase
        tests:
          - dbt_expectations.expect_column_distinct_count_to_be_less_than:
              value: 2
          - accepted_values:
              values:
                - EUR
                - USD


